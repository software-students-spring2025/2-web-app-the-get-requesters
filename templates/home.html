{% extends "base.html" %}

{% block content %}
    <div style="text-align: center; max-width: 600px; margin: auto;">
        <h1>Welcome, {{ current_user.username }}!</h1>
        
        <div style="margin-bottom: 15px;">
            <a href="{{ url_for('logout') }}" style="margin-right: 10px;">Logout</a>
            <a href="{{ url_for('profile') }}" style="margin-right: 10px;">Profile</a>
            <a href="{{ url_for('create_event') }}" style="margin-right: 10px;">New Event</a>
            <a href="{{ url_for('create_group') }}">New Group</a>
        </div>

        <h2>Your Created Events</h2>
        {% if created_events %}
            <div class="event-list">
                {% for event in created_events %}
                    <div class="event-item" style="margin-bottom: 10px; padding: 10px; border-bottom: 1px solid #ddd;">
                        <strong>{{ event.event_name }}</strong> - {{ event.description }} (Date: {{ event.event_date }})
                        <a href="{{ url_for('delete_event', event_name=event.event_name) }}" 
                           style="color: red; text-decoration: none; margin-left: 10px;"
                           onclick="return confirm('Are you sure you want to delete this event?');">
                            ❌ Delete
                        </a>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>You haven't created any events yet.</p>
        {% endif %}

        <h2>Events You Joined</h2>
        {% if joined_events %}
            <div class="event-list">
                {% for event in joined_events %}
                    <div class="event-item" style="margin-bottom: 10px; padding: 10px; border-bottom: 1px solid #ddd;">
                        <strong>{{ event.event_name }}</strong> - {{ event.description }} (Date: {{ event.event_date }})
                        <a href="{{ url_for('leave_event', event_name=event.event_name) }}" 
                           style="color: #007bff; text-decoration: none; margin-left: 10px;"
                           onclick="return confirm('Are you sure you want to leave this event?');">
                            🚪 Leave
                        </a>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>You haven't joined any events yet.</p>
        {% endif %}
    </div>
{% endblock %}
